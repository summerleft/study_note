XSS(Cross-site Scripting)攻击分为存储型、反射型、DOM型三种

#### 存储型XSS
攻击步骤：
1. 攻击者将恶意代码提交至目标网站数据库
2. 用户打开网站时，服务端取出恶意代码，拼接在HTML中返回浏览器
3. 浏览器接收到响应后解析执行，恶意代码也被执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或冒充用户行为调用目标网站接口执行攻击操作
> 常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信

#### 反射型XSS
攻击步骤：
1. 攻击者构造特殊URL，包含恶意代码
2. 用户打开URL，服务端从URL中取出恶意代码，拼接在HTML中返回浏览器
3. 浏览器接收到响应后解析执行，恶意代码也被执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或冒充用户行为调用目标网站接口执行攻击操作
> 常见于通过URL传递参数的功能，如网站搜索、跳转
 
+ 反射型XSS恶意代码在URL中，存储型XSS恶意代码存在数据库中

#### DOM型XSS
攻击步骤：
1. 攻击者构造特殊URL，包含恶意代码
2. 打开URL
3. 浏览器接收到响应后解析执行，前端JS取出URL中的恶意代码并执行
4. 恶意代码窃取用户数据并发送到攻击者的网站，或冒充用户行为调用目标网站接口执行攻击操作
> DOM型XSS攻击中，取出和执行恶意代码由浏览器完成，其他两种则由服务端完成

#### 预防XSS攻击
+ 输入过滤
+ 预防存储型和反射型：
  + 改成纯前端渲染，把代码和数据分隔开
  + 对HTML做充分转义
+ 预防DOM型：
  + 避免```.innerHTML```, ```.outerHTML```,``` document.write()```
  + 避免拼接不可信的字符串

####　其他XSS防范措施
+ Content Security Policy
  + 禁止加载外域代码，防止复杂的攻击逻辑
  + 禁止外域提交
  + 禁止内联脚本执行
  + 禁止未授权的脚本执行
+ 输入内容长度控制
+ http-only
+ 验证码